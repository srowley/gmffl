<script>
$(function () {
  $('[data-toggle="popover"]').popover()
})
</script>
<% @franchises.each_with_index do |franchise, index| %>
<%= "<div class=\"row\">".html_safe if index.even? %>
<div class="col-md-6">
  <table class="table table-condensed table-hover">
    <caption>Franchise <%= franchise.id %></caption>
    <thead>
      <tr>
        <th scope="col">Player</th>
        <th scope="col">Salary</th>
        <th scope="col">Contract</th>
        <th scope="col" class="text-center">Acquired Cost</th>
        <th scope="col" class="text-center">Holdout Eligible?</th>
        <th scope="col" class="text-center">Dead Cap</th>
        <th scope="col">Notes</th>
      </tr>
    </thead>
    <tbody>
      <tr colspan="7" class="text-nowrap"><td>Active Roster</td></tr>
      <%= render partial: "contract", collection: franchise.active_roster %>
      <%= render partial: "salary_total", locals: { franchise: franchise, roster: :active_roster } %>

      <% if franchise.taxi_squad.present? %>
      <tr colspan="7" class="text-nowrap"><td>Taxi Squad</td></tr>
      <%= render partial: "contract", collection: franchise.taxi_squad %>
      <%= render partial: "salary_total", locals: { franchise: franchise, roster: :taxi_squad} %>
      <% end %>

      <% if franchise.pending_franchise_tag.present? %>
      <tr colspan="7" class="text-nowrap"><td>Franchise Tag Eligible</td></tr>
      <%= render partial: "contract", collection: franchise.pending_franchise_tag %>
      <%= render partial: "salary_total", locals: { franchise: franchise, roster: :pending_franchise_tag } %>
      <% end %>

      <tr>
        <td class="text-nowrap">Total Salary</td>
        <td class="text-center"><%= franchise.salary %></td>
        <td colspan="6"> </td>
      </tr>

      <tr>
        <td class="text-nowrap">Remaining Cap Space</td>
        <td class="text-center"><%= 300 - franchise.salary %></td>
        <td colspan="6"> </td>
      </tr>
    </tbody>
  </table>
</div>
<%= "</div>".html_safe if index.odd? %>
<% end %>
